<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/polymerfire/polymerfire.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/paper-badge/paper-badge.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../fat-chat-shared-styles/fat-chat-shared-styles.html"/>

<dom-module id="fat-chat-overview">
    <template>
        <style include="shared-styles"/>
        <style is="custom-style">
            :host {
                display: block;
                font-family: Helvetica, Arial, sans-serif;
            }

            /* Need to position the badge to look like a text superscript */
            .container > paper-badge {
                --paper-badge-margin-left: 20px;
                --paper-badge-margin-bottom: 0px;
            }


        </style>

        <firebase-query
                app-name="fat-data"
                id="conversationsQuery"
                path="/users2/[[userid]]/conversations"
                data="{{conversations}}"
                log="true">
        </firebase-query>


        <div class="content">
            <template is="dom-repeat" items="[[conversations]]" as="conversation">
                <div class="chat-unread-[[chat.unread]]">
                    <!--<input conversationid="[[conversation.$key]]" value="{{conversation.name::input}}" onchange="document.querySelector('#query').setStoredValue(document.querySelector('#query').path + '/' + this.conversationid +'/name',this.value);"/>-->
                    <paper-material>
                        <div class="container" tabindex="0">
                            <span><a href="#/screen/[[conversation.$key]]">[[conversation.name]]</a></span>
                            <paper-badge label="0"></paper-badge>
                        </div>
                    </paper-material>
                </div>
            </template>
        </div>

    </template>

    <script>

        Polymer({
            is: 'fat-chat-overview',
            properties: {},
            ready: function () {
                console.log(this.$.conversationsQuery.path)
            }
        });
    </script>
</dom-module>
